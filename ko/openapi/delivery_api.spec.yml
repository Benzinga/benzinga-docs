openapi: 3.0.0
info:
  contact: {}
  description: 이 REST API는 컨퍼런스 콜 및 요약 데이터를 조회하기 위한 엔드포인트를 제공합니다.
  termsOfService: http://swagger.io/terms/
  title: Conference call transcripts
  version: 2.1.0
paths:
  /api/v1/transcripts/calls:
    get:
      description: 선택적 필터와 페이지네이션을 사용하여 콜 목록을 조회합니다. 기본적으로 COMPLETED 상태의 콜만 반환됩니다. 모든
        상태의 콜을 반환받으려면 status=ALL을 사용합니다.
      operationId: get-conference-calls
      parameters:
        - description: 페이지네이션에 사용할 페이지 번호(1부터 시작)
          in: query
          name: page
          schema:
            type: integer
            default: 1
        - description: 페이지당 반환할 항목의 수
          in: query
          name: page_size
          schema:
            type: integer
            default: 10
        - description: 콜 상태별로 필터링합니다. 기본값은 COMPLETED입니다. 모든 상태의 콜을 반환받으려면 ALL을 사용합니다.
          in: query
          name: status
          schema:
            type: string
            default: COMPLETED
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
        "400":
          description: 잘못된 요청
          content:
            application/json:
              schema:
                additionalProperties:
                  type: string
                type: object
        "500":
          description: 내부 서버 오류
          content:
            application/json:
              schema:
                additionalProperties:
                  type: string
                type: object
      security:
        - ApiKeyAuth: []
      summary: 모든 호출 불러오기
      tags:
        - calls
  /api/v1/transcripts/calls/{call_id}:
    delete:
      description: ID로 특정 콜 삭제
      operationId: delete-conference-call-by-id
      parameters:
        - description: 통화 녹취의 고유 식별자
          in: path
          name: call_id
          required: true
          schema:
            type: string
      responses:
        "200":
          description: 성공
          content:
            application/json:
              schema:
                additionalProperties:
                  type: string
                type: object
        "400":
          description: 잘못된 요청
          content:
            application/json:
              schema:
                additionalProperties:
                  type: string
                type: object
        "500":
          description: 내부 서버 오류
          content:
            application/json:
              schema:
                additionalProperties:
                  type: string
                type: object
      security:
        - ApiKeyAuth: []
      summary: ID로 콜 삭제
      tags:
        - calls
    get:
      description: ID로 특정 콜의 상세 정보를 조회합니다
      operationId: get-conference-call-by-id
      parameters:
        - description: 트랜스크립트 콜의 고유 식별자
          in: path
          name: call_id
          required: true
          schema:
            type: string
        - description: true이면 오디오 녹음에 대한 사전 서명된 URL을 포함합니다
          in: query
          name: audio
          schema:
            type: boolean
        - description: true인 경우 PDF 텍스트 전문에 대한 사전 서명된 URL을 포함합니다.
          in: query
          name: pdf
          schema:
            type: boolean
        - description: true인 경우 더 깔끔하고 단순화된 출력 형식을 반환합니다.
          in: query
          name: clean
          schema:
            type: boolean
        - description: "응답 형식(예: 'json' 또는 'html')입니다."
          in: query
          name: format
          schema:
            type: string
      responses:
        "200":
          description: 확인
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/domain.Calls"
        "400":
          description: 잘못된 요청
          content:
            application/json:
              schema:
                additionalProperties:
                  type: string
                type: object
        "404":
          description: 찾을 수 없습니다
          content:
            application/json:
              schema:
                additionalProperties:
                  type: string
                type: object
        "500":
          description: 내부 서버 오류
          content:
            application/json:
              schema:
                additionalProperties:
                  type: string
                type: object
      security:
        - ApiKeyAuth: []
      summary: ID로 호출 조회
      tags:
        - calls
    put:
      description: ID로 특정 통화 녹취를 지정하고 세부 정보를 업데이트합니다
      operationId: update-conference-call-by-id
      parameters:
        - description: 통화 녹취의 고유 식별자
          in: path
          name: call_id
          required: true
          schema:
            type: string
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/domain.UpdateCallReq"
        description: 통화 업데이트 상세 정보
        required: true
      responses:
        "200":
          description: 성공
          content:
            application/json:
              schema:
                additionalProperties:
                  type: string
                type: object
        "400":
          description: 잘못된 요청
          content:
            application/json:
              schema:
                additionalProperties:
                  type: string
                type: object
        "500":
          description: 내부 서버 오류
          content:
            application/json:
              schema:
                additionalProperties:
                  type: string
                type: object
      security:
        - ApiKeyAuth: []
      summary: ID로 콜 업데이트
      tags:
        - calls
  /api/v1/transcripts/participants/{participant_id}:
    delete:
      description: ID로 특정 참가자를 삭제합니다
      operationId: delete-participant-by-id
      parameters:
        - description: 참가자의 고유 식별자
          in: path
          name: participant_id
          required: true
          schema:
            type: string
      responses:
        "200":
          description: 성공
          content:
            application/json:
              schema:
                additionalProperties:
                  type: string
                type: object
        "400":
          description: 잘못된 요청
          content:
            application/json:
              schema:
                additionalProperties:
                  type: string
                type: object
        "500":
          description: 내부 서버 오류
          content:
            application/json:
              schema:
                additionalProperties:
                  type: string
                type: object
      security:
        - ApiKeyAuth: []
      summary: ID로 참가자 삭제
      tags:
        - participants
    put:
      description: ID로 특정 참가자 세부 정보를 업데이트합니다
      operationId: update-participant-by-id
      parameters:
        - description: 참가자의 고유 식별자
          in: path
          name: participant_id
          required: true
          schema:
            type: string
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/domain.UpdateParticipantReq"
        description: 참가자 업데이트 정보
        required: true
      responses:
        "200":
          description: 성공
          content:
            application/json:
              schema:
                additionalProperties:
                  type: string
                type: object
        "400":
          description: 잘못된 요청
          content:
            application/json:
              schema:
                additionalProperties:
                  type: string
                type: object
        "500":
          description: 내부 서버 오류
          content:
            application/json:
              schema:
                additionalProperties:
                  type: string
                type: object
      security:
        - ApiKeyAuth: []
      summary: ID로 참가자 업데이트
      tags:
        - participants
  /api/v1/transcripts/status:
    get:
      description: 필터와 페이지네이션을 사용해 특정 뷰를 조회합니다. GET(쿼리 매개변수)과 POST(JSON 본문)를 모두 지원합니다.
      operationId: query-status-view
      parameters:
        - description: 뷰 이름(GET 전용)
          in: query
          name: view_name
          schema:
            type: string
        - description: WHERE 절을 JSON으로 인코딩한 값(GET 전용)
          in: query
          name: where
          schema:
            type: string
        - description: order_by를 JSON으로 인코딩한 값(GET 전용)
          in: query
          name: order_by
          schema:
            type: string
        - description: 페이지 번호
          in: query
          name: page
          schema:
            type: integer
        - description: 페이지 크기
          in: query
          name: page_size
          schema:
            type: integer
      requestBody:
        $ref: "#/components/requestBodies/api.QueryRequest"
      responses:
        "200":
          description: 성공
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
        "400":
          description: 잘못된 요청
          content:
            application/json:
              schema:
                additionalProperties:
                  type: string
                type: object
        "500":
          description: 내부 서버 오류
          content:
            application/json:
              schema:
                additionalProperties:
                  type: string
                type: object
      security:
        - ApiKeyAuth: []
      summary: 상태 뷰 조회
      tags:
        - status
    post:
      description: 필터링과 페이지네이션을 사용해 특정 뷰를 조회합니다. GET(쿼리 파라미터)와 POST(JSON 본문) 둘 다를 지원합니다.
      operationId: query-status-view
      parameters:
        - description: 뷰 이름(GET 전용)
          in: query
          name: view_name
          schema:
            type: string
        - description: JSON으로 인코딩된 where 절(GET 전용)
          in: query
          name: where
          schema:
            type: string
        - description: JSON으로 인코딩된 order_by 매개변수(GET 전용)
          in: query
          name: order_by
          schema:
            type: string
        - description: 페이지 번호
          in: query
          name: page
          schema:
            type: integer
        - description: 페이지 크기
          in: query
          name: page_size
          schema:
            type: integer
      requestBody:
        $ref: "#/components/requestBodies/api.QueryRequest"
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
        "400":
          description: 잘못된 요청
          content:
            application/json:
              schema:
                additionalProperties:
                  type: string
                type: object
        "500":
          description: 내부 서버 오류
          content:
            application/json:
              schema:
                additionalProperties:
                  type: string
                type: object
      security:
        - ApiKeyAuth: []
      summary: 상태 뷰 조회
      tags:
        - status
  /api/v1/transcripts/summaries:
    get:
      description: 페이지네이션으로 요약 목록을 조회합니다
      operationId: get-summaries
      parameters:
        - description: 페이지 매김에 사용하는 페이지 번호(1부터 시작)
          in: query
          name: page
          schema:
            type: integer
            default: 1
        - description: 페이지당 반환할 항목의 수
          in: query
          name: page_size
          schema:
            type: integer
            default: 10
      responses:
        "200":
          description: 확인
          content:
            application/json:
              schema:
                additionalProperties: true
                type: object
        "400":
          description: 잘못된 요청
          content:
            application/json:
              schema:
                additionalProperties:
                  type: string
                type: object
        "500":
          description: 내부 서버 오류
          content:
            application/json:
              schema:
                additionalProperties:
                  type: string
                type: object
      security:
        - ApiKeyAuth: []
      summary: 요약 불러오기
      tags:
        - summaries
  /api/v1/transcripts/summaries/{call_id}:
    get:
      description: 특정 call ID의 요약 정보를 조회합니다
      operationId: get-summary-by-call-id
      parameters:
        - description: 요약에 연결된 콜의 고유 식별자
          in: path
          name: call_id
          required: true
          schema:
            type: string
      responses:
        "200":
          description: 정상
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/domain.Summaries"
        "404":
          description: 찾을 수 없습니다
          content:
            application/json:
              schema:
                additionalProperties:
                  type: string
                type: object
        "500":
          description: 내부 서버 오류
          content:
            application/json:
              schema:
                additionalProperties:
                  type: string
                type: object
      security:
        - ApiKeyAuth: []
      summary: Call ID로 요약 가져오기
      tags:
        - summaries
    put:
      description: 특정 콜 ID에 대한 요약 상세 정보를 업데이트합니다.
      operationId: update-summary-by-call-id
      parameters:
        - description: 콜의 고유 식별자
          in: path
          name: call_id
          required: true
          schema:
            type: string
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/domain.UpdateSummaryReq"
        description: 요약 업데이트 상세 정보
        required: true
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                additionalProperties:
                  type: string
                type: object
        "400":
          description: 잘못된 요청
          content:
            application/json:
              schema:
                additionalProperties:
                  type: string
                type: object
        "500":
          description: 내부 서버 오류
          content:
            application/json:
              schema:
                additionalProperties:
                  type: string
                type: object
      security:
        - ApiKeyAuth: []
      summary: 콜 ID로 요약 업데이트
      tags:
        - summaries
  /api/v1/transcripts/transcripts/{transcript_id}/segment/{segment_id}:
    delete:
      description: 특정 트랜스크립트 구간 삭제
      operationId: delete-transcript-segments-by-id
      parameters:
        - description: 트랜스크립트의 고유 식별자
          in: path
          name: transcript_id
          required: true
          schema:
            type: string
        - description: 구간의 고유 식별자
          in: path
          name: segment_id
          required: true
          schema:
            type: string
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                additionalProperties:
                  type: string
                type: object
        "400":
          description: 잘못된 요청
          content:
            application/json:
              schema:
                additionalProperties:
                  type: string
                type: object
        "500":
          description: 서버 내부 오류
          content:
            application/json:
              schema:
                additionalProperties:
                  type: string
                type: object
      security:
        - ApiKeyAuth: []
      summary: ID로 실적 발표 콜 발언 구간 삭제
      tags:
        - transcripts
    put:
      description: 특정 전사본 구간의 세부 정보를 업데이트합니다
      operationId: update-transcript-segments-by-id
      parameters:
        - description: 전사본의 고유 식별자
          in: path
          name: transcript_id
          required: true
          schema:
            type: string
        - description: 구간의 고유 식별자
          in: path
          name: segment_id
          required: true
          schema:
            type: string
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/domain.UpdateTranscriptSegmentsReq"
        description: 구간 업데이트 세부 정보
        required: true
      responses:
        "200":
          description: 성공
          content:
            application/json:
              schema:
                additionalProperties:
                  type: string
                type: object
        "400":
          description: 잘못된 요청
          content:
            application/json:
              schema:
                additionalProperties:
                  type: string
                type: object
        "500":
          description: 서버 내부 오류
          content:
            application/json:
              schema:
                additionalProperties:
                  type: string
                type: object
      security:
        - ApiKeyAuth: []
      summary: ID로 실적 발표 콜 발언 구간 업데이트
      tags:
        - transcripts
components:
  requestBodies:
    api.QueryRequest:
      content:
        application/json:
          schema:
            $ref: "#/components/schemas/api.QueryRequest"
      description: 쿼리 세부 정보(POST용)
  securitySchemes:
    ApiKeyAuth:
      in: query
      name: token
      type: apiKey
  schemas:
    api.QueryRequest:
      type: object
    domain.Calls:
      properties:
        call_id:
          example: 80753086-444f-4dcf-961d-15509ba09dc7
          type: string
        call_title:
          example: Q3 2023 Earnings Call
          type: string
        created_at:
          type: string
        deleted_at:
          type: string
        description:
          example: Quarterly earnings report
          type: string
        duration:
          example: 60
          type: integer
        end_time:
          example: 2023-10-25T15:00:00Z
          type: string
        exchange:
          example: NASDAQ
          type: string
        figis:
          example:
            - '["BBG000B9XRY4"]'
          items:
            type: string
          type: array
        headline:
          example: Company X Reports Strong Q3 Results
          type: string
        name:
          example: Apple Inc.
          type: string
        participants:
          items:
            $ref: "#/components/schemas/domain.Participants"
          type: array
        period:
          example: Q3
          type: string
        recordings:
          items:
            $ref: "#/components/schemas/domain.Recordings"
          type: array
        securities:
          $ref: "#/components/schemas/pgtype.JSONB"
        start_time:
          example: 2023-10-25T14:00:00Z
          type: string
        status:
          example: completed
          type: string
        summary:
          $ref: "#/components/schemas/domain.Summaries"
        symbol:
          example: AAPL
          type: string
        transcripts:
          items:
            $ref: "#/components/schemas/domain.Transcripts"
          type: array
        updated_at:
          type: string
        webcast_url:
          example: https://example.com/webcast
          type: string
        year:
          example: 2023
          type: integer
      type: object
    domain.Participants:
      properties:
        call_id:
          type: string
        deleted_at:
          type: string
        human_verified:
          type: boolean
        mentions:
          type: integer
        name:
          type: string
        organization:
          type: string
        participant_id:
          type: string
        role:
          type: string
      type: object
    domain.Recordings:
      properties:
        bucket:
          type: string
        created_at:
          type: string
        duration:
          type: integer
        formats:
          $ref: "#/components/schemas/pgtype.JSONB"
        language:
          type: string
        location:
          type: string
        recording_id:
          type: string
        total_files:
          type: integer
        total_size:
          type: integer
        updated_at:
          type: string
      type: object
    domain.Summaries:
      properties:
        call_id:
          example: 770e8400-e29b-41d4-a716-446655440000
          type: string
        created_at:
          type: string
        deleted_at:
          type: string
        language:
          example: en
          type: string
        sentiment:
          example: 0.85
          type: number
        summary:
          example: The company reported positive growth...
          type: string
        summary_id:
          example: 550e8400-e29b-41d4-a716-446655440000
          type: string
        symbol:
          example: MSFT
          type: string
        transcript_id:
          example: 660e8400-e29b-41d4-a716-446655440000
          type: string
        updated_at:
          type: string
      type: object
    domain.TranscriptSegments:
      properties:
        confidence:
          type: number
        end_time:
          type: string
        segment_id:
          type: integer
        sentiment:
          type: number
        speaker:
          type: string
        start_time:
          type: string
        text:
          type: string
      type: object
    domain.Transcripts:
      properties:
        confidence_score:
          type: number
        language:
          type: string
        segments:
          items:
            $ref: "#/components/schemas/domain.TranscriptSegments"
          type: array
        text:
          type: string
        transcript_id:
          type: string
        type:
          $ref: "#/components/schemas/domain.TranscriptsType"
      type: object
    domain.TranscriptsType:
      enum:
        - LIVE
        - NON_LIVE
      type: string
      x-enum-varnames:
        - LiveTranscripts
        - NonLiveTranscripts
    domain.UpdateCallReq:
      properties:
        call_title:
          example: Q3 2023 Earnings Call
          type: string
        cusip:
          example: "037833100"
          type: string
        duration:
          example: 60
          type: integer
        end_time:
          example: 2023-10-25T15:00:00Z
          type: string
        exchange:
          example: NASDAQ
          type: string
        headline:
          example: Company X Reports Strong Q3 Results
          type: string
        isin:
          example: US0378331005
          type: string
        name:
          example: Apple Inc.
          type: string
        start_time:
          example: 2023-10-25T14:00:00Z
          type: string
        status:
          example: completed
          type: string
        symbol:
          example: AAPL
          type: string
      type: object
    domain.UpdateParticipantReq:
      properties:
        human_verified:
          example: true
          type: boolean
        mentions:
          example: 5
          type: integer
        name:
          example: Tim Cook
          type: string
        organization:
          example: Apple Inc.
          type: string
        role:
          example: CEO
          type: string
      type: object
    domain.UpdateSummaryReq:
      properties:
        language:
          example: en
          type: string
        summary:
          example: Overall, the quarter was strong with 5% revenue growth...
          type: string
        symbol:
          example: AAPL
          type: string
      type: object
    domain.UpdateTranscriptSegmentsReq:
      properties:
        end_time:
          example: 00:05:30
          type: string
        speaker:
          example: Elon Musk
          type: string
        start_time:
          example: 00:00:10
          type: string
        text:
          example: Welcome everyone to the Q3 earnings call.
          type: string
      type: object
    pgtype.JSONB:
      properties:
        bytes:
          items:
            type: integer
          type: array
        status:
          $ref: "#/components/schemas/pgtype.Status"
      type: object
    pgtype.Status:
      enum:
        - 0
        - 1
        - 2
      type: integer
      x-enum-varnames:
        - Undefined
        - "Null"
        - Present

---
title: "تدفق النصوص"
description: "نصوص مكالمات الأرباح في الوقت الفعلي، جملةً بجملة، أثناء إلقائها."
asyncapi: "/asyncapi/transcripts-stream.yml transcripts"
---

<div id="overview">
  ## نظرة عامة
</div>

اشترك في نصوص مكالمات الأرباح في الوقت الفعلي وتلقَّ تحديثات جملةً بجملة أثناء نطقها خلال مكالمات الأرباح المباشرة. هذا مثالي لبناء واجهات عرض للنصوص وأدوات تحليل تعمل في الوقت الفعلي.

<div id="key-features">
  ### الميزات الرئيسية
</div>

- **تفريغ مباشر**: احصل على تحديثات للجمل في الوقت الفعلي أثناء حديث المتحدثين في مكالمات الأرباح
- **توقيت على مستوى الكلمة**: تتضمّن كل جملة طوابع زمنية لكل كلمة بالإضافة إلى درجات ثقة
- **تحديد المتحدّث**: تتبّع من يتحدّث (المديرون التنفيذيون، المحلّلون، إلخ)
- **تتبّع الحالة**: راقب ما إذا كانت نصوص المكالمات قيد التنفيذ أم مكتملة
- **اشتراك مرن**: اشترك في رموز تداول محدّدة أو في جميع النصوص باستخدام `*`
- **اختبار تجريبي**: اختبر عملية التكامل لديك باستخدام بيانات وهمية عندما لا تكون هناك مكالمات مباشرة نشطة

<div id="use-cases">
  ### حالات الاستخدام
</div>

- بناء عارِضات آنية لنصوص مكالمات الأرباح
- إنشاء أدوات للترجمة النصية الحية وتحسين إمكانية الوصول
- إجراء تحليل للمشاعر في الوقت الفعلي على مكالمات الأرباح
- استخراج العبارات والمقاييس الرئيسية عند ورودها في المكالمة
- إطلاق تنبيهات عند ورود كلمات مفتاحية أو موضوعات محددة أثناء المكالمات الحية
- أرشفة النصوص الكاملة مع بيانات توقيت دقيقة

<div id="quick-start">
  ## البدء السريع
</div>

استخدم أداة اختبار ويب سوكيت التفاعلية أعلاه للاتصال بالبث واختباره في الوقت الفعلي.

<div id="connection-url">
  ### عنوان URL للاتصال
</div>

```
wss://api.benzinga.com/api/v1/transcripts/stream?token=YOUR_TOKEN
```


<div id="query-parameters">
  ### معاملات الاستعلام
</div>

| المعامل | إلزامي | الوصف |
|-----------|----------|-------------|
| `token` | نعم | رمز الوصول الخاص بك إلى واجهة برمجة التطبيقات WebSocket الخاصة بـ Benzinga |

<div id="subscription-commands">
  ## أوامر الاشتراك
</div>

أرسل أوامر JSON للتحكم في اشتراكاتك:

<div id="subscribe-to-a-ticker">
  ### الاشتراك في رمز التداول
</div>

```json
{
  "action": "subscribe",
  "ticker": "AAPL"
}
```


<div id="subscribe-to-all-transcripts">
  ### الاشتراك في جميع التفريغات
</div>

```json
{
  "action": "subscribe",
  "ticker": "*"
}
```


<div id="unsubscribe-from-a-ticker">
  ### إلغاء الاشتراك في رمز التداول
</div>

```json
{
  "action": "unsubscribe",
  "ticker": "AAPL"
}
```


<div id="list-active-transcripts">
  ### عرض النصوص النشطة
</div>

```json
{
  "action": "list"
}
```


<div id="keep-connection-alive">
  ### الحفاظ على الاتصال نشطًا
</div>

```json
{
  "action": "ping"
}
```


<div id="test-with-mock-data">
  ### الاختبار باستخدام بيانات وهمية
</div>

عندما لا تتوفر نصوص حية، استخدم وضع المحاكاة للاختبار:

```json
{
  "action": "subscribe",
  "ticker": "AAPL",
  "mock": true
}
```

رموز أسهم تجريبية مدعومة: `AAPL`, `MSFT`, `TSLA`


<div id="message-example">
  ## مثال لرسالة
</div>

```json
{
  "call_id": "call_123456",
  "transcript_id": "550e8400-e29b-41d4-a716-446655440000",
  "call_title": "Apple Inc. Q4 2024 Earnings Call",
  "sentence": "Revenue for the quarter was 89.5 billion dollars.",
  "start_time": "2024-01-15T16:30:15Z",
  "end_time": "2024-01-15T16:30:19Z",
  "symbol": "AAPL",
  "exchange": "NASDAQ",
  "name": "Apple Inc.",
  "sequence": 42,
  "status": "IN_PROGRESS",
  "speaker": "Tim Cook, CEO",
  "type": "LIVE",
  "language": "en",
  "confidence": 0.98,
  "words": [
    {
      "text": "Revenue",
      "confidence": 0.99,
      "start": 0,
      "end": 450
    },
    {
      "text": "for",
      "confidence": 0.98,
      "start": 450,
      "end": 600
    }
  ],
  "created_time": "2024-01-15T16:30:19Z"
}
```


<div id="key-fields">
  ### الحقول الأساسية
</div>

| Field | Description |
|-------|-------------|
| `sentence` | النص الكامل للجملة المنطوقة |
| `sequence` | ترتيب هذه الجملة في النص الحرفي (0، 1، 2...) |
| `speaker` | اسم/معرّف المتحدث |
| `status` | `IN_PROGRESS` (قيد التقدّم) أو `COMPLETE` (مكتمل) |
| `confidence` | نسبة الثقة الإجمالية في الدقة (0.0 - 1.0) |
| `words` | مصفوفة من الكلمات الفردية مع التوقيت ونسبة الثقة |
| `start_time` / `end_time` | طوابع زمنية بصيغة ISO 8601 لتوقيت الجملة |

<div id="transcript-status">
  ### حالة النص الحرفي
</div>

| الحالة | الوصف |
|--------|-------|
| `IN_PROGRESS` | النص الحرفي قيد التحديث حاليًا ويتلقى تحديثات |
| `COMPLETE` | اكتمل النص الحرفي، ولا يُتوقع تلقي مزيد من التحديثات |

<div id="word-level-data">
  ## بيانات على مستوى الكلمة
</div>

تتضمن كل جملة معلومات تفصيلية على مستوى كل كلمة:

```json
{
  "text": "Revenue",
  "confidence": 0.99,
  "start": 0,
  "end": 450
}
```

* **text**: الكلمة نفسها
* **confidence**: درجة الثقة في التعرف (0.0 - 1.0)
* **start/end**: الإزاحات الزمنية بالميلي ثانية من بداية الجملة


<div id="interactive-commands">
  ## الأوامر التفاعلية
</div>

| الأمر | المعلمات | الوصف |
|---------|-----------|-------------|
| `subscribe` | `ticker` | الاشتراك في تحديثات النص لرمز تداول |
| `unsubscribe` | `ticker` | إيقاف استلام التحديثات لرمز تداول |
| `list` | - | جلب قائمة النصوص النشطة/المتاحة |
| `subscribed` | - | جلب قائمة اشتراكاتك الحالية |
| `ping` | - | إبقاء الاتصال نشطًا (يستجيب بـ `pong`) |
| `echo` | `message` | اختبار الصدى (يستجيب برسالتك) |

<div id="best-practices">
  ## أفضل الممارسات
</div>

<div id="real-time-display">
  ### العرض اللحظي
</div>

- **إدارة التخزين المؤقت (buffer)**: اعرض الجمل حسب ترتيبها التسلسلي باستخدام الحقل `sequence`
- **تنسيق المتحدث**: نسِّق العرض بشكل مختلف بناءً على قيمة `speaker` (المديرين التنفيذيين مقابل المحللين)
- **مؤشرات الحالة**: اعرض مؤشرات مرئية لحالتي `IN_PROGRESS` و`COMPLETE`

<div id="performance">
  ### الأداء
</div>

- **تحذير من البدل (Wildcard)**: استخدام `ticker: "*"` يعني الاشتراك في جميع المحاضر، ما قد ينتج عنه حجم بيانات كبير
- **اشتراكات موجهة**: اشترك فقط في رموز التداول التي تحتاجها لتقليل استهلاك عرض النطاق الترددي
- **نبضة (Heartbeat)**: أرسل `ping` كل 30-60 ثانية للحفاظ على الاتصال

<div id="data-quality">
  ### جودة البيانات
</div>

- **التصفية بناءً على مستوى الثقة**: فكّر في تجاهل أو تمييز الجمل ذات درجات الثقة المنخفضة
- **دقة الكلمات**: استخدم درجة الثقة لكل كلمة لتحديد عمليات النسخ غير المؤكدة
- **التعامل مع اللغة**: تحقق من الحقل `language` لضمان العرض الصحيح للنص

<div id="testing">
  ### الاختبار
</div>

- **وضع المحاكاة (Mock Mode)**: استخدم `mock: true` أثناء التطوير عند عدم وجود اتصالات مباشرة فعّالة
- **اختبار الصدى (Echo Testing)**: استخدم الإجراء `echo` للتحقق من الاتصال والتعامل مع الرسائل
- **أمر القائمة (List Command)**: تحقّق من `list` لمعرفة ما هو متاح حاليًا

<div id="example-integration">
  ## مثال للتكامل
</div>

```javascript
const ws = new WebSocket(
  'wss://api.benzinga.com/api/v1/transcripts/stream?token=YOUR_TOKEN'
);

ws.onopen = () => {
  // الاشتراك في نصوص محاضر Apple
  ws.send(JSON.stringify({
    action: 'subscribe',
    ticker: 'AAPL'
  }));
};

ws.onmessage = (event) => {
  const data = JSON.parse(event.data);

  // عرض الجملة مع اسم المتحدث
  console.log(`[${data.sequence}] ${data.speaker}: ${data.sentence}`);

  // التحقق من اكتمال المحضر
  if (data.status === 'COMPLETE') {
    console.log('Transcript finished');
  }
};

// الحفاظ على الاتصال نشطاً
setInterval(() => {
  ws.send(JSON.stringify({ action: 'ping' }));
}, 30000);
```


<div id="related-documentation">
  ## التوثيق المرتبط
</div>

- [مقدمة ويب سوكيت](../introduction) - مفاهيم ويب سوكيت العامة وأساسيات الاتصال
- [المصادقة](../authentication) - كيفية الحصول على رموز وصول واجهة برمجة التطبيقات API واستخدامها